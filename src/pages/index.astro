---
import BaseLayout from '@/layouts/BaseLayout.astro';
import ASCIIBackground from '@/components/ascii/ASCIIBackground.astro';
import GlitchLogo from '@/components/ui/GlitchLogo';
import { withBase } from '@/lib/utils';
---

<BaseLayout title="Welcome" description="A developer blog with ASCII aesthetics">
  <ASCIIBackground effect="matrix" />

  <div class="splash-container">
    <div class="splash-content">
      <GlitchLogo client:load />
      <p class="splash-tagline">developer · maker · tinkerer</p>

      <nav class="splash-nav">
        <a href={withBase("/blog")} class="nav-pill">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 19l7-7 3 3-7 7-3-3z"/>
            <path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/>
            <path d="M2 2l7.586 7.586"/>
            <circle cx="11" cy="11" r="2"/>
          </svg>
          <span>Blog</span>
        </a>
        <a href={withBase("/projects")} class="nav-pill">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/>
          </svg>
          <span>Projects</span>
        </a>
        <a href={withBase("/about")} class="nav-pill">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
            <circle cx="12" cy="7" r="4"/>
          </svg>
          <span>About</span>
        </a>
      </nav>
    </div>
  </div>
</BaseLayout>

<style>
  .splash-container {
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: var(--space-md);
    position: relative;
    overflow: hidden;
  }

  .splash-content {
    text-align: center;
    z-index: 1;
    animation: break-through 0.7s cubic-bezier(0.16, 1, 0.3, 1) both;
  }

  @keyframes break-through {
    0% {
      transform: scale(0.6);
      opacity: 0;
      filter: blur(20px);
    }
    100% {
      transform: scale(1);
      opacity: 1;
      filter: blur(0);
    }
  }

  .splash-tagline {
    color: var(--text-secondary);
    margin-top: var(--space-md);
    font-size: var(--font-size-lg);
  }

  .splash-nav {
    margin-top: var(--space-xl);
    display: flex;
    gap: var(--space-sm);
    justify-content: center;
    flex-wrap: wrap;
  }

  .nav-pill {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1.25rem;
    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(8px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 100px;
    color: var(--text-primary);
    font-weight: 500;
    font-size: 0.95rem;
    transition: all 0.2s ease;
    opacity: 0;
    animation: pill-slide-in 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  }

  .nav-pill:nth-child(1) {
    animation-delay: 0.4s;
  }

  .nav-pill:nth-child(2) {
    animation-delay: 0.5s;
  }

  .nav-pill:nth-child(3) {
    animation-delay: 0.6s;
  }

  @keyframes pill-slide-in {
    from {
      opacity: 0;
      transform: translateY(12px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .nav-pill svg {
    opacity: 0.7;
    transition: opacity 0.2s ease;
  }

  .nav-pill:hover {
    background: var(--color-primary);
    border-color: var(--color-primary);
    color: var(--bg-primary);
    transform: translateY(-2px);
    box-shadow: 0 8px 24px var(--ascii-glow);
  }

  .nav-pill:hover svg {
    opacity: 1;
  }

  @media (max-width: 640px) {
    .splash-tagline {
      font-size: var(--font-size-base);
    }

    .splash-nav {
      flex-direction: column;
      align-items: center;
    }

    .nav-pill {
      width: 100%;
      max-width: 200px;
      justify-content: center;
    }
  }
</style>

<script>
  function triggerBreakthrough() {
    setTimeout(() => {
      window.dispatchEvent(new CustomEvent('ascii-trigger-explosion', {
        detail: { x: 0.5, y: 0.5 }
      }));
    }, 150);
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', triggerBreakthrough);
  } else {
    triggerBreakthrough();
  }

  document.addEventListener('astro:after-swap', triggerBreakthrough);
</script>
