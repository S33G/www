---
interface Props {
  name: string;
  description: string | null;
  url: string;
  blogUrl?: string;
  stars?: number;
  language?: string | null;
}

const { name, description, url, blogUrl, stars = 0, language } = Astro.props;
const primaryUrl = blogUrl ?? url;
const isExternal = primaryUrl.startsWith('http');
const linkTarget = isExternal ? '_blank' : undefined;
const linkRel = isExternal ? 'noopener noreferrer' : undefined;
---

<article class="project-card">
  <a href={primaryUrl} target={linkTarget} rel={linkRel} class="project-link">
    <header class="project-header">
      <h2 class="project-name">{name}</h2>
      <span class="project-arrow" aria-hidden="true">→</span>
    </header>

    <p class="project-description">
      {description || 'No description available'}
    </p>

    <footer class="project-footer">
      {language && (
        <span class="project-language">
          <span class="language-dot" aria-hidden="true"></span>
          {language}
        </span>
      )}
      {stars > 0 && (
        <span class="project-stars">
          ★ {stars}
        </span>
      )}
    </footer>
  </a>
  <a
    href={url}
    target="_blank"
    rel="noopener noreferrer"
    class="project-github"
    aria-label={`Open ${name} on GitHub`}
    title="View GitHub repo"
  >
    <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
      <path
        fill="currentColor"
        d="M12 2C6.48 2 2 6.58 2 12.26c0 4.51 2.87 8.33 6.84 9.68.5.1.68-.22.68-.49 0-.24-.01-.88-.01-1.73-2.78.62-3.37-1.37-3.37-1.37-.45-1.18-1.11-1.49-1.11-1.49-.91-.64.07-.63.07-.63 1 .07 1.53 1.06 1.53 1.06.9 1.58 2.36 1.12 2.94.86.09-.67.35-1.12.63-1.38-2.22-.26-4.56-1.14-4.56-5.08 0-1.12.39-2.04 1.03-2.76-.1-.26-.45-1.32.1-2.75 0 0 .85-.28 2.8 1.05A9.48 9.48 0 0 1 12 6.8c.85 0 1.71.12 2.5.35 1.95-1.33 2.8-1.05 2.8-1.05.55 1.43.2 2.49.1 2.75.64.72 1.03 1.64 1.03 2.76 0 3.95-2.34 4.82-4.57 5.08.36.32.68.95.68 1.92 0 1.39-.01 2.51-.01 2.85 0 .27.18.59.69.49 3.97-1.35 6.83-5.17 6.83-9.68C22 6.58 17.52 2 12 2z"
      />
    </svg>
  </a>
</article>

<style>
  .project-card {
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-sm);
    transition: all var(--transition-fast);
    background: var(--bg-primary);
    position: relative;
  }

  .project-card:hover {
    border-color: var(--color-primary);
    transform: translateY(-2px);
    box-shadow: var(--shadow-sm);
  }

  .project-link {
    display: block;
    padding: var(--space-md);
    color: inherit;
    text-decoration: none;
    position: relative;
    z-index: 1;
  }

  .project-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: var(--space-sm);
  }

  .project-name {
    font-size: var(--font-size-base);
    font-weight: 600;
    color: var(--text-primary);
    margin: 0;
    transition: color var(--transition-fast);
  }

  .project-card:hover .project-name {
    color: var(--color-primary);
  }

  .project-arrow {
    color: var(--text-muted);
    transition: transform var(--transition-fast), color var(--transition-fast);
  }

  .project-card:hover .project-arrow {
    transform: translateX(4px);
    color: var(--color-primary);
  }

  .project-description {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    margin: 0;
    line-height: 1.6;
  }

  .project-footer {
    display: flex;
    gap: var(--space-md);
    margin-top: var(--space-sm);
    padding-top: var(--space-sm);
    border-top: 1px solid var(--border-color);
    font-size: var(--font-size-sm);
    color: var(--text-muted);
  }

  .project-github {
    position: absolute;
    top: 0.75rem;
    right: 0.75rem;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    color: var(--text-muted);
    transition: color var(--transition-fast), border-color var(--transition-fast), transform var(--transition-fast);
    z-index: 2;
  }

  .project-github svg {
    width: 16px;
    height: 16px;
  }

  .project-github:hover {
    color: var(--color-primary);
    border-color: var(--color-primary);
    transform: translateY(-1px);
  }

  .project-language {
    display: flex;
    align-items: center;
    gap: var(--space-xs);
  }

  .language-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--color-primary);
  }

  .project-stars {
    color: #f59e0b;
  }
</style>
