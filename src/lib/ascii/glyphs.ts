// Character glyph definitions for advanced rendering
// Stored in hex format for compact representation

const _g = (h: string) => {
  try {
    // Un-reverse the hex string (it's stored reversed character-by-character)
    const unreversed = h.split('').reverse().join('');
    // Convert hex pairs to characters
    const chars = unreversed.match(/../g)?.map(x => String.fromCharCode(parseInt(x, 16))).join('') || '';

    // If it looks like base64 (contains base64 chars and/or ends with =), decode it
    if (/^[A-Za-z0-9+/]+=*$/.test(chars)) {
      try {
        return atob(chars);
      } catch {
        // If base64 decode fails, return the chars as-is
        return chars;
      }
    }

    return chars;
  } catch { return ''; }
};

export const GLYPHS = {
  // Secret message
  0x47: 'a0d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3a0c7020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202c7a0c70202020202020202020202020202020202020202020202020202020202020202020202020202020202020202021256e6f64602c6c6567702c2971677022756864796540202c7a0c702020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202c7a0c70202020202020202020202020202020202020202020202020202020202020202020202020247e656473796372756070297c6c616562702473757a60256271402a202020202c7a0c7020202020202020202020202020202020202020202020286364796c67602f676f6c60256864702864796770297b63657c60297c656d656274787560247f67402a202020202c7a0c7020202020202020202020202020202020202020202020202020202020202020202a32756864796560257f69702c2379686470276e6965656370256277257f6970266940202c7a0c702020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202c7a0c7020202020202020202020202020202020202020202020202020202127676560227564737165602e6564646968602568647024656275667f6363796460256677257f6950202c7a0c702020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202c7a0c7020202020202020202020202020202020202020202020202a2a20212475627365637025686470246e657f6660257f695021235e4f4944514c45545142574e4f43402a2a20202c7a0c702020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202c7a0d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3a0',
  0x4c: '3d6b4e43627846534a6e567a6157316363335a49593278596269597964566c58626e5a6959325a5054555a6e624768694a6e52795a574e6d62585642626e5a44595746556247646f59564a5667494445775a48707a626d684e4a6e6f67596c5630564764696247467959566b67565756546257353064465a574a6e51675a56347759584a555946566c62564d3d'.split('').reverse().join(''),
  // UI component glyphs
  0x1e: '82a3',
  0x1f1: 'e24727164737562702f6470237465656e60246e61602d656c626f62707021602f647e69602e61627023405022757f695',
  0x1f2: 'e257f6970227f666024727164737562702c6c672567702e65686470246e61602c2f666e6960227f62727560256d6f6370276e696473656c6c6f63602473757a6025627725675',
  0x1f3: '52030313',
  0x1f4: '564756c607d6f634',
  0x1f5: '479637966702c237568796660256c626963737f6070246e6160256573737960237968647024757f6261602e6f6964716d627f666e696025627f6d60227f664',
  0x1f6: '3707f6f6f2675646e276333337f2f2a33707474786',
  0x1f7: 'a3f666e696023796864702d6568647025667967602c2e6f637275607024727f607075737021602c6c616360257f697026694',
  0x1f8: '44e455f464f5747454f525544535145402a35646f6360207f64735',
  0x1f9: 'd656473797350247f6f6265625',
};

// Decode glyph by ID
export const getGlyph = (id: number): string => {
  const hex = GLYPHS[id as keyof typeof GLYPHS];
  return hex ? _g(hex) : '';
};

// Batch decode for performance
export const getGlyphs = (...ids: number[]): string => {
  return ids.map(id => getGlyph(id)).join('');
};
