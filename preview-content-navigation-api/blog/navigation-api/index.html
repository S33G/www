<!DOCTYPE html><html lang="en-GB" data-theme="dark"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Astro v5.16.11"><link rel="icon" id="dynamic-favicon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAABZSURBVHic7dMhEQAwEIBBd5DwC/sRjFJBzJyxuIk5Y3EBc8biAuaM5YXMGYsLmDOWFzBnLC9gzljewJyxvIE5Y3kDc8byBuaM5Q3MGcsbmDPWA1JKSUlJSUlJSQH4AtxsB1OqLIl8AAAAAElFTkSuQmCC" sizes="32x32"><script type="module">const a=["s","e","e","g"];let r=0,e,t,l;function m(){if(l=document.getElementById("dynamic-favicon"),e=document.createElement("canvas"),e.width=32,e.height=32,t=e.getContext("2d"),!t)return;const n=getComputedStyle(document.documentElement).getPropertyValue("--bg-primary").trim()||"#0f0f0f",o=getComputedStyle(document.documentElement).getPropertyValue("--text-primary").trim()||"#ffffff";t.fillStyle=n,t.fillRect(0,0,32,32),t.fillStyle=o,t.font="bold 24px monospace",t.textAlign="center",t.textBaseline="middle",i()}function i(){if(!t||!l)return;const n=getComputedStyle(document.documentElement).getPropertyValue("--bg-primary").trim()||"#0f0f0f",o=getComputedStyle(document.documentElement).getPropertyValue("--text-primary").trim()||"#ffffff";t.fillStyle=n,t.fillRect(0,0,32,32),t.fillStyle=o,t.font="bold 24px monospace",t.textAlign="center",t.textBaseline="middle",t.fillText(a[r],16,16);const f=e.toDataURL("image/png");l.setAttribute("href",f)}function c(){r=(r+1)%a.length,i(),setTimeout(()=>{c()},800)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",m):m();const u=new MutationObserver(()=>{i()});u.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]});setTimeout(()=>{c()},800);</script><!-- Prevent theme flash --><script>
(function() {
  try {
    const stored = localStorage.getItem('ascii-blog-preferences');
    if (stored) {
      const prefs = JSON.parse(stored);
      if (prefs.theme === 'dark' || prefs.theme === 'light') {
        document.documentElement.setAttribute('data-theme', prefs.theme);
      } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.documentElement.setAttribute('data-theme', 'dark');
      } else {
        document.documentElement.setAttribute('data-theme', 'light');
      }
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
      document.documentElement.setAttribute('data-theme', 'dark');
    }
  } catch (e) {}
})();
</script><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><script type="module" src="/preview-content-navigation-api/_astro/ClientRouter.astro_astro_type_script_index_0_lang.DoXpAe-1.js"></script><!-- Primary Meta Tags --><title>The Navigation API: the end of routing hacks | s33g</title><meta name="title" content="The Navigation API: the end of routing hacks | s33g"><meta name="description" content="The browser finally has a dedicated API for SPA navigation."><link rel="canonical" href="https://s33g.uk/preview-content-navigation-api/blog/navigation-api/"><!-- Open Graph / Facebook --><meta property="og:type" content="article"><meta property="og:url" content="https://s33g.uk/preview-content-navigation-api/blog/navigation-api/"><meta property="og:title" content="The Navigation API: the end of routing hacks"><meta property="og:description" content="The browser finally has a dedicated API for SPA navigation."><meta property="og:image" content="https://s33g.uk/og-image.png"><meta property="og:site_name" content="s33g"><meta property="article:published_time" content="2026-02-10T00:00:00.000Z"><meta property="article:tag" content="web"><meta property="article:tag" content="javascript"><meta property="article:tag" content="spa"><meta property="article:tag" content="browser-apis"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://s33g.uk/preview-content-navigation-api/blog/navigation-api/"><meta property="twitter:title" content="The Navigation API: the end of routing hacks"><meta property="twitter:description" content="The browser finally has a dedicated API for SPA navigation."><meta property="twitter:image" content="https://s33g.uk/og-image.png"><!-- JSON-LD --><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","name":"The Navigation API: the end of routing hacks","description":"The browser finally has a dedicated API for SPA navigation.","url":"https://s33g.uk/preview-content-navigation-api/blog/navigation-api/","datePublished":"2026-02-10T00:00:00.000Z","keywords":"web, javascript, spa, browser-apis"}</script><!-- Preload mono font --><link rel="preload" href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600&display=swap" as="style"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600&display=swap"><link rel="stylesheet" href="/preview-content-navigation-api/_astro/about.CDTvvAjM.css">
<style>.navigation{display:flex;align-items:center;justify-content:space-between;padding:var(--space-md) var(--space-lg);background:var(--bg-card);border-bottom:1px solid var(--border-color);position:sticky;top:0;z-index:50;backdrop-filter:blur(12px)}.nav-brand{flex-shrink:0}.brand-link{display:flex;align-items:center;color:var(--text-primary);font-weight:700;font-size:1.25rem;text-decoration:none;font-family:var(--font-mono)}.brand-text{color:var(--color-primary)}.logo-char{display:inline-block;transition:all .05s ease}.logo-char.glitching{animation:char-glitch .05s ease-out}@keyframes char-glitch{0%{opacity:1}50%{opacity:.8}to{opacity:1}}.nav-links{display:flex;gap:var(--space-xs);list-style:none;margin:0;padding:0;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}.nav-link{color:var(--text-secondary);text-decoration:none;padding:.5rem 1rem;border-radius:var(--border-radius-sm);font-size:.9rem;font-weight:500;transition:all var(--transition-fast)}.nav-link:hover,.nav-link:focus{color:var(--text-primary);background:var(--bg-elevated)}.nav-link.active{color:var(--color-primary);background:var(--ascii-tint)}@media(max-width:640px){.navigation{padding:var(--space-sm) var(--space-md);flex-direction:column;align-items:center;gap:var(--space-xs)}.nav-links{gap:0;justify-content:center;width:100%;position:static;transform:none}.nav-link{padding:.5rem .75rem;font-size:.85rem}}@keyframes astroFadeInOut{0%{opacity:1}to{opacity:0}}@keyframes astroFadeIn{0%{opacity:0;mix-blend-mode:plus-lighter}to{opacity:1;mix-blend-mode:plus-lighter}}@keyframes astroFadeOut{0%{opacity:1;mix-blend-mode:plus-lighter}to{opacity:0;mix-blend-mode:plus-lighter}}@keyframes astroSlideFromRight{0%{transform:translate(100%)}}@keyframes astroSlideFromLeft{0%{transform:translate(-100%)}}@keyframes astroSlideToRight{to{transform:translate(100%)}}@keyframes astroSlideToLeft{to{transform:translate(-100%)}}@media(prefers-reduced-motion){::view-transition-group(*),::view-transition-old(*),::view-transition-new(*){animation:none!important}[data-astro-transition-scope]{animation:none!important}}
</style>
<link rel="stylesheet" href="/preview-content-navigation-api/_astro/_slug_.BaXCJUdC.css">
<style>.post-card[data-astro-cid-eahyhkeo]{border:1px solid var(--border-color);border-radius:var(--border-radius-sm);transition:all var(--transition-fast);background:var(--bg-primary)}.post-card[data-astro-cid-eahyhkeo]:hover{border-color:var(--color-primary);transform:translateY(-2px);box-shadow:var(--shadow-sm)}.post-link[data-astro-cid-eahyhkeo]{display:block;padding:var(--space-md);color:inherit;text-decoration:none}.post-card-header[data-astro-cid-eahyhkeo]{margin-bottom:var(--space-sm)}.post-date[data-astro-cid-eahyhkeo]{display:block;font-size:var(--font-size-sm);color:var(--text-muted);margin-bottom:var(--space-xs)}.post-title[data-astro-cid-eahyhkeo]{font-size:var(--font-size-base);font-weight:600;color:var(--text-primary);margin:0;transition:color var(--transition-fast)}.post-card[data-astro-cid-eahyhkeo]:hover .post-title[data-astro-cid-eahyhkeo]{color:var(--color-primary)}.post-description[data-astro-cid-eahyhkeo]{font-size:var(--font-size-sm);color:var(--text-secondary);margin:0;line-height:1.6}.post-card-footer[data-astro-cid-eahyhkeo]{margin-top:var(--space-sm);padding-top:var(--space-sm);border-top:1px solid var(--border-color)}.post-tags[data-astro-cid-eahyhkeo]{display:flex;gap:var(--space-sm);flex-wrap:wrap}.tag[data-astro-cid-eahyhkeo]{font-size:.75rem;color:var(--color-primary);background:var(--ascii-tint);padding:.125rem .5rem;border-radius:4px}
</style><script type="module" src="/preview-content-navigation-api/_astro/page.B1Se5AQJ.js"></script><style>[data-astro-transition-scope="astro-frvnq75b-1"] { view-transition-name: astro-frvnq75b-1; }@layer astro { ::view-transition-old(astro-frvnq75b-1) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(astro-frvnq75b-1) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(astro-frvnq75b-1) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(astro-frvnq75b-1) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-frvnq75b-1"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-frvnq75b-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-frvnq75b-1"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-frvnq75b-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-frvnq75b-1"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-frvnq75b-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-frvnq75b-1"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-frvnq75b-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style></head> <body data-base-path="/preview-content-navigation-api"> <a href="#main-content" class="skip-link" data-astro-cid-57xfgqmy>
Skip to main content
</a>   <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).only=e;window.dispatchEvent(new Event("astro:only"));})();</script><script>(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t),11:t=>1/0*t},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();</script><astro-island uid="1c1Tzu" component-url="/preview-content-navigation-api/_astro/ASCIIBackgroundWrapper.B5t1eb81.js" component-export="default" renderer-url="/preview-content-navigation-api/_astro/client.D_Es0amM.js" props="{&quot;effect&quot;:[0,&quot;wave&quot;]}" ssr client="only" opts="{&quot;name&quot;:&quot;ASCIIBackgroundWrapper&quot;,&quot;value&quot;:&quot;react&quot;}"></astro-island>  <div class="post-layout" data-astro-cid-gjtny2mx> <script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();</script><astro-island uid="1OkF3h" prefix="r3" component-url="/preview-content-navigation-api/_astro/Navigation.D8Q8_NPy.js" component-export="default" renderer-url="/preview-content-navigation-api/_astro/client.D_Es0amM.js" props="{&quot;currentPath&quot;:[0,&quot;/preview-content-navigation-api/blog/navigation-api/&quot;],&quot;basePath&quot;:[0,&quot;/preview-content-navigation-api&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;Navigation&quot;,&quot;value&quot;:true}" await-children><nav class="navigation" aria-label="Main navigation"><div class="nav-brand"><a href="/preview-content-navigation-api/" class="brand-link" aria-label="Home"><span class="brand-text"><span class="logo-char " style="display:inline-block;transition:all 0.05s ease">s</span><span class="logo-char " style="display:inline-block;transition:all 0.05s ease">e</span><span class="logo-char " style="display:inline-block;transition:all 0.05s ease">e</span><span class="logo-char " style="display:inline-block;transition:all 0.05s ease">g</span></span></a></div><ul class="nav-links" role="list"><li><a href="/preview-content-navigation-api/blog" class="nav-link active" title="Blog">Blog</a></li><li><a href="/preview-content-navigation-api/projects" class="nav-link" title="Projects">Projects</a></li><li><a href="/preview-content-navigation-api/about" class="nav-link" title="About">About</a></li></ul></nav><!--astro:end--></astro-island>  <main id="main-content" data-astro-cid-gjtny2mx> <article class="post" data-post-navigation data-prev="/preview-content-navigation-api/blog/ai-doom-gloom" data-next data-astro-cid-gjtny2mx data-astro-transition-scope="astro-frvnq75b-1"> <header class="post-header" data-astro-cid-gjtny2mx> <a href="/preview-content-navigation-api/blog" class="back-link" data-astro-cid-gjtny2mx>← Back to posts</a> <h1 data-astro-cid-7fjmunld> The Navigation API: the end of routing hacks </h1>  <div class="post-meta" data-astro-cid-gjtny2mx> <time datetime="2026-02-10T00:00:00.000Z" data-astro-cid-gjtny2mx> 10 February 2026 </time>  </div> <div class="post-tags" data-astro-cid-gjtny2mx> <a href="/preview-content-navigation-api/blog/tags/web" class="tag" data-astro-cid-gjtny2mx>web</a><a href="/preview-content-navigation-api/blog/tags/javascript" class="tag" data-astro-cid-gjtny2mx>javascript</a><a href="/preview-content-navigation-api/blog/tags/spa" class="tag" data-astro-cid-gjtny2mx>spa</a><a href="/preview-content-navigation-api/blog/tags/browser-apis" class="tag" data-astro-cid-gjtny2mx>browser-apis</a> </div> </header> <div class="post-content" data-astro-cid-gjtny2mx>  <p>Every SPA router ever shipped is built on the same hack: intercept <code>&lt;a&gt;</code> clicks, call <code>history.pushState()</code>, and pretend the browser navigated. It didn’t. You just changed the URL bar and crossed your fingers.</p>
<p>The <a href="https://developer.mozilla.org/en-US/docs/Web/API/Navigation_API">Navigation API</a> replaces that entire pattern with something the browser actually understands. As of January 2026 it’s Baseline — supported in Chrome, Firefox, Safari, and Edge.</p>
<h2 id="why-the-history-api-was-always-wrong-for-this">Why the History API was always wrong for this</h2>
<p>The <a href="https://developer.mozilla.org/en-US/docs/Web/API/History_API">History API</a> wasn’t designed for SPAs. Ian Hickson, the HTML spec editor, has <a href="https://html5doctor.com/interview-with-ian-hickson-html-editor/">called <code>pushState()</code> one of his biggest mistakes</a>.</p>
<p><code>history.pushState()</code> doesn’t navigate. It updates the URL and pushes a state entry. The browser has no idea anything happened — no loading indicator, no abort signal, no lifecycle hooks. To fake SPA routing on top of it, you needed:</p>
<ol>
<li>Click handlers on every <code>&lt;a&gt;</code> tag (or a global listener with delegation)</li>
<li><code>event.preventDefault()</code> on each one</li>
<li>A manual <code>history.pushState()</code> call</li>
<li>A <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/popstate_event"><code>popstate</code></a> listener for back/forward — which doesn’t fire on <code>pushState</code>, only on browser-triggered navigation</li>
<li>Manual DOM updates to reflect the new route</li>
<li>Edge case handling for forms, <code>window.location</code>, hashes, and iframes</li>
</ol>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="js"><code><span class="line"><span style="color:#6A737D">// The skeleton of every lightweight SPA router</span></span>
<span class="line"><span style="color:#E1E4E8">document.</span><span style="color:#B392F0">addEventListener</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;click&#39;</span><span style="color:#E1E4E8">, (</span><span style="color:#FFAB70">e</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#79B8FF"> anchor</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> e.target.</span><span style="color:#B392F0">closest</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;a&#39;</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#F97583">  if</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">anchor </span><span style="color:#F97583">||</span><span style="color:#E1E4E8"> anchor.origin </span><span style="color:#F97583">!==</span><span style="color:#E1E4E8"> location.origin) </span><span style="color:#F97583">return</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">  e.</span><span style="color:#B392F0">preventDefault</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">  history.</span><span style="color:#B392F0">pushState</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">null</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">&#39;&#39;</span><span style="color:#E1E4E8">, anchor.href);</span></span>
<span class="line"><span style="color:#B392F0">  renderPage</span><span style="color:#E1E4E8">(anchor.href); </span><span style="color:#6A737D">// your problem</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">window.</span><span style="color:#B392F0">addEventListener</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;popstate&#39;</span><span style="color:#E1E4E8">, () </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#B392F0">  renderPage</span><span style="color:#E1E4E8">(location.href); </span><span style="color:#6A737D">// also your problem</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span></code></pre>
<p>That’s fragile, incomplete, and everywhere. It doesn’t handle forms, programmatic navigation, or anything “in progress.” The entire <a href="https://www.npmjs.com/package/history"><code>history</code></a> npm package (5M+ weekly downloads, used internally by React Router) exists solely to paper over these gaps.</p>
<h2 id="one-event-to-handle-everything">One event to handle everything</h2>
<p>The Navigation API gives the browser a single <code>navigate</code> event that fires for <strong>all</strong> navigations — link clicks, form submissions, back/forward, <code>pushState()</code> calls, and programmatic <code>navigation.navigate()</code> calls. One listener, one place.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="js"><code><span class="line"><span style="color:#E1E4E8">navigation.</span><span style="color:#B392F0">addEventListener</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;navigate&#39;</span><span style="color:#E1E4E8">, (</span><span style="color:#FFAB70">event</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  if</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">event.canIntercept) </span><span style="color:#F97583">return</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">  if</span><span style="color:#E1E4E8"> (event.hashChange </span><span style="color:#F97583">||</span><span style="color:#E1E4E8"> event.downloadRequest </span><span style="color:#F97583">!==</span><span style="color:#79B8FF"> null</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">return</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#79B8FF"> url</span><span style="color:#F97583"> =</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> URL</span><span style="color:#E1E4E8">(event.destination.url);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  if</span><span style="color:#E1E4E8"> (url.pathname.</span><span style="color:#B392F0">startsWith</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;/articles/&#39;</span><span style="color:#E1E4E8">)) {</span></span>
<span class="line"><span style="color:#E1E4E8">    event.</span><span style="color:#B392F0">intercept</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#F97583">      async</span><span style="color:#B392F0"> handler</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#B392F0">        renderPlaceholder</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#F97583">        const</span><span style="color:#79B8FF"> res</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#B392F0"> fetch</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">`/api/articles${</span><span style="color:#E1E4E8">url</span><span style="color:#9ECBFF">.</span><span style="color:#E1E4E8">pathname</span><span style="color:#9ECBFF">}`</span><span style="color:#E1E4E8">, {</span></span>
<span class="line"><span style="color:#E1E4E8">          signal: event.signal,</span></span>
<span class="line"><span style="color:#E1E4E8">        });</span></span>
<span class="line"><span style="color:#B392F0">        renderArticle</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">await</span><span style="color:#E1E4E8"> res.</span><span style="color:#B392F0">json</span><span style="color:#E1E4E8">());</span></span>
<span class="line"><span style="color:#E1E4E8">      },</span></span>
<span class="line"><span style="color:#E1E4E8">    });</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span></code></pre>
<p>The things that matter here:</p>
<ul>
<li><strong><code>event.intercept()</code></strong> tells the browser “I’m handling this.” The URL updates, the tab shows a loading spinner, and the stop button works. The browser <em>knows</em> a navigation is in progress.</li>
<li><strong><code>event.signal</code></strong> is a built-in <code>AbortSignal</code>. Click another link mid-fetch and it cancels automatically.</li>
<li><strong><code>event.canIntercept</code></strong> is <code>false</code> for cross-origin navigations. The API is honest about its boundaries.</li>
<li><strong>You never touch <code>&lt;a&gt;</code> tags.</strong> No <code>preventDefault()</code>, no <code>&lt;Link&gt;</code> component wrappers, no delegation hacks. Standard HTML links just work.</li>
</ul>
<h2 id="example-global-link-handler-for-a-cms">Example: global link handler for a CMS</h2>
<p>This is the use case that makes it click. Say you have a blog or CMS where content has standard <code>&lt;a href=&quot;/about&quot;&gt;</code> links. With the History API you had two bad options: rewrite <code>&lt;a&gt;</code> into framework <a href="https://reactrouter.com/start/framework/navigating"><code>&lt;Link&gt;</code></a> components, or add a fragile global click listener.</p>
<p>With the Navigation API, one listener at the root handles every same-origin link on the page — framework components, server-rendered HTML, user-generated content. All of it.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="js"><code><span class="line"><span style="color:#E1E4E8">navigation.</span><span style="color:#B392F0">addEventListener</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;navigate&#39;</span><span style="color:#E1E4E8">, (</span><span style="color:#FFAB70">event</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  if</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">event.canIntercept </span><span style="color:#F97583">||</span><span style="color:#E1E4E8"> event.hashChange) </span><span style="color:#F97583">return</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">  event.</span><span style="color:#B392F0">intercept</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#F97583">    async</span><span style="color:#B392F0"> handler</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#F97583">      const</span><span style="color:#79B8FF"> html</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#B392F0"> fetchPage</span><span style="color:#E1E4E8">(event.destination.url);</span></span>
<span class="line"><span style="color:#E1E4E8">      document.</span><span style="color:#B392F0">querySelector</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;#content&#39;</span><span style="color:#E1E4E8">).innerHTML </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> html;</span></span>
<span class="line"><span style="color:#E1E4E8">    },</span></span>
<span class="line"><span style="color:#E1E4E8">  });</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span></code></pre>
<p>Compare this with what <a href="https://reactrouter.com">React Router</a> does internally: component wrappers, context providers, click interception, <code>popstate</code> listeners, scroll restoration logic. The Navigation API collapses most of that into browser-native behaviour.</p>
<h2 id="example-form-submissions-without-reload">Example: form submissions without reload</h2>
<p>The <code>navigate</code> event fires for form submissions too. If <a href="https://developer.mozilla.org/en-US/docs/Web/API/NavigateEvent/formData"><code>event.formData</code></a> isn’t <code>null</code>, it’s a <code>POST</code>.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="js"><code><span class="line"><span style="color:#E1E4E8">navigation.</span><span style="color:#B392F0">addEventListener</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;navigate&#39;</span><span style="color:#E1E4E8">, (</span><span style="color:#FFAB70">event</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  if</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">event.canIntercept </span><span style="color:#F97583">||</span><span style="color:#F97583"> !</span><span style="color:#E1E4E8">event.formData) </span><span style="color:#F97583">return</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#79B8FF"> url</span><span style="color:#F97583"> =</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> URL</span><span style="color:#E1E4E8">(event.destination.url);</span></span>
<span class="line"><span style="color:#F97583">  if</span><span style="color:#E1E4E8"> (url.pathname </span><span style="color:#F97583">!==</span><span style="color:#9ECBFF"> &#39;/search&#39;</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">return</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">  event.</span><span style="color:#B392F0">intercept</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#F97583">    async</span><span style="color:#B392F0"> handler</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#F97583">      const</span><span style="color:#79B8FF"> query</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> event.formData.</span><span style="color:#B392F0">get</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;q&#39;</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#F97583">      const</span><span style="color:#79B8FF"> res</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#B392F0"> fetch</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">`/api/search?q=${</span><span style="color:#B392F0">encodeURIComponent</span><span style="color:#9ECBFF">(</span><span style="color:#E1E4E8">query</span><span style="color:#9ECBFF">)</span><span style="color:#9ECBFF">}`</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#B392F0">      renderSearchResults</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">await</span><span style="color:#E1E4E8"> res.</span><span style="color:#B392F0">json</span><span style="color:#E1E4E8">());</span></span>
<span class="line"><span style="color:#E1E4E8">    },</span></span>
<span class="line"><span style="color:#E1E4E8">  });</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span></code></pre>
<p>No <code>onSubmit</code> handler. No <code>event.preventDefault()</code> on the form. A plain <code>&lt;form action=&quot;/search&quot; method=&quot;post&quot;&gt;</code> is intercepted like any other navigation. This replaces patterns like Remix’s <a href="https://remix.run/docs/en/main/components/form"><code>&lt;Form&gt;</code> component</a> for simple cases — the browser handles the interception natively.</p>
<h2 id="example-state-that-survives-refresh">Example: state that survives refresh</h2>
<p><code>history.state</code> is coupled to the global history stack and shared across frames. The Navigation API gives each entry isolated state via <a href="https://developer.mozilla.org/en-US/docs/Web/API/NavigationHistoryEntry/getState"><code>getState()</code></a>.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="js"><code><span class="line"><span style="color:#6A737D">// Store UI state when navigating</span></span>
<span class="line"><span style="color:#E1E4E8">navigation.</span><span style="color:#B392F0">navigate</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;/photos/42&#39;</span><span style="color:#E1E4E8">, {</span></span>
<span class="line"><span style="color:#E1E4E8">  state: { scrollY: window.scrollY, lightboxOpen: </span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8"> },</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// Restore it — even after a refresh</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> state</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> navigation.currentEntry.</span><span style="color:#B392F0">getState</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#F97583">if</span><span style="color:#E1E4E8"> (state?.lightboxOpen) {</span></span>
<span class="line"><span style="color:#B392F0">  openLightbox</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">  window.</span><span style="color:#B392F0">scrollTo</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">, state.scrollY);</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// Update without navigating</span></span>
<span class="line"><span style="color:#E1E4E8">navigation.</span><span style="color:#B392F0">updateCurrentEntry</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">  state: { </span><span style="color:#F97583">...</span><span style="color:#E1E4E8">navigation.currentEntry.</span><span style="color:#B392F0">getState</span><span style="color:#E1E4E8">(), sidebarCollapsed: </span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8"> },</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span></code></pre>
<p>This stores structured clone data — objects, arrays, dates. It’s per-entry and persists across refreshes. You can inspect all entries via <code>navigation.entries()</code>, each with a URL, key, and state. The history stack is no longer opaque.</p>
<p>This replaces the <code>sessionStorage</code> dance people do to survive refresh, and the <code>useEffect(() =&gt; { ... }, [location])</code> pattern for syncing state with URL changes.</p>
<h2 id="what-it-replaces-and-what-it-doesnt">What it replaces (and what it doesn’t)</h2>
<p><strong>Does it kill React Router?</strong> No. React Router provides component-level route matching, nested layouts, data loaders, and error boundaries. The Navigation API doesn’t do any of that.</p>
<p>What it replaces is the plumbing underneath:</p>





























<table><thead><tr><th>What</th><th>Why it’s redundant</th></tr></thead><tbody><tr><td><a href="https://www.npmjs.com/package/history"><code>history</code></a> npm package</td><td>The browser handles the history stack natively now. This was the abstraction layer under React Router and most other routers.</td></tr><tr><td><a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/popstate_event"><code>popstate</code></a> listeners</td><td>The <code>navigate</code> event covers back/forward, pushes, replaces — everything <code>popstate</code> did plus more.</td></tr><tr><td>Custom <code>&lt;Link&gt;</code> components</td><td>Their core job was <code>preventDefault()</code> + <code>pushState()</code>. Standard <code>&lt;a&gt;</code> tags now work without wrappers.</td></tr><tr><td><a href="https://developer.mozilla.org/en-US/docs/Web/API/History/scrollRestoration"><code>scrollRestoration</code></a> hacks</td><td><code>intercept()</code> gives you fine-grained scroll control with <code>event.scroll()</code> and automatic restoration.</td></tr><tr><td><code>useEffect</code>-based route watchers</td><td><code>navigation.currentEntry</code> is a reliable source of truth. <a href="https://developer.mozilla.org/en-US/docs/Web/API/Navigation/currententrychange_event"><code>currententrychange</code></a> fires when it changes.</td></tr></tbody></table>
<p>React Router’s developers have <a href="https://github.com/remix-run/react-router/discussions/14468">discussed adopting it internally</a>. Angular is further along — the team has already built <a href="https://github.com/angular/angular/tree/main/packages/core/primitives/dom-navigation">internal primitives</a> around it in <code>@angular/core</code>.</p>
<h2 id="browser-support">Browser support</h2>
<p>As of January 2026, the Navigation API hit <a href="https://caniuse.com/mdn-api_navigation">Baseline “Newly available”</a>:</p>






























<table><thead><tr><th>Browser</th><th>Version</th><th>Notes</th></tr></thead><tbody><tr><td>Chrome</td><td>102+</td><td>Since mid-2022</td></tr><tr><td>Edge</td><td>102+</td><td>Since mid-2022</td></tr><tr><td>Firefox</td><td>147+</td><td>Shipped</td></tr><tr><td>Safari</td><td>26.2+</td><td>Shipped (desktop and iOS)</td></tr></tbody></table>
<p>Global coverage is around <strong>80%</strong>. That’s real. This isn’t experimental anymore.</p>
<p>For older browsers, <a href="https://github.com/virtualstate/navigation"><code>@virtualstate/navigation</code></a> provides a polyfill covering the full API surface. A simple progressive enhancement pattern works:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="js"><code><span class="line"><span style="color:#F97583">if</span><span style="color:#E1E4E8"> (window.navigation) {</span></span>
<span class="line"><span style="color:#E1E4E8">  navigation.</span><span style="color:#B392F0">addEventListener</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;navigate&#39;</span><span style="color:#E1E4E8">, handleNavigate);</span></span>
<span class="line"><span style="color:#E1E4E8">} </span><span style="color:#F97583">else</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">  window.</span><span style="color:#B392F0">addEventListener</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;popstate&#39;</span><span style="color:#E1E4E8">, handlePopState);</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>The <del><a href="https://github.com/alephjs/aleph.js">aleph.js</a></del> <a href="https://fresh.deno.dev/">Fresh</a> framework already ships this pattern in production.</p>
<h2 id="gotchas">Gotchas</h2>
<p>The API is solid but has edges:</p>
<ul>
<li><strong>No <code>navigate</code> event on initial page load.</strong> If you do client-side rendering, you need a separate init function. Server-rendered pages don’t have this problem.</li>
<li><strong>Single frame only.</strong> It works on the top-level page or a single <code>&lt;iframe&gt;</code>. No cross-frame history manipulation — which is actually an improvement, since the History API’s cross-frame behaviour was a notorious source of bugs.</li>
<li><strong>You can’t delete or reorder entries.</strong> Navigate to a temporary modal and that entry stays in the stack. No way to clean it up programmatically.</li>
<li><strong>Traverse cancellation is limited.</strong> You can’t <code>preventDefault()</code> a back/forward navigation. The event still fires so you can observe it, but you can’t block it.</li>
<li><strong>Still marked “Experimental” on MDN</strong>, even though it ships everywhere. Don’t let the label put you off — the <a href="https://github.com/WICG/navigation-api">spec</a> is part of the <a href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#navigation-api">HTML Living Standard</a> now.</li>
</ul>
<h2 id="the-shift">The shift</h2>
<p>The interesting thing here isn’t any single method or event. It’s the change in who does what.</p>
<p>With the History API, the browser was something you worked around. You suppressed its defaults, faked its navigations, and manually managed state it should have tracked. Every SPA router is fundamentally a workaround for the browser not understanding what your app is doing.</p>
<p>The Navigation API inverts that. <code>event.intercept()</code> is a contract: “I’m handling this navigation.” The browser responds with a loading indicator, an abort signal, a managed history entry, and the right events when you’re done.</p>
<p>The browser finally understands client-side routing. That’s the whole point.</p>  </div> <footer class="post-footer" data-astro-cid-gjtny2mx> <section class="similar-posts" data-astro-cid-gjtny2mx> <h2 data-astro-cid-gjtny2mx>Related posts</h2> <div class="similar-posts-grid" data-astro-cid-gjtny2mx> <article class="post-card" data-astro-cid-eahyhkeo> <a href="/preview-content-navigation-api/blog/bpm-tool" class="post-link" data-astro-cid-eahyhkeo> <header class="post-card-header" data-astro-cid-eahyhkeo> <time datetime="2026-01-22T00:00:00.000Z" class="post-date" data-astro-cid-eahyhkeo> 22 January 2026 </time> <h2 class="post-title" data-astro-cid-eahyhkeo>BPM Tool: tempo math for music producers</h2> </header> <p class="post-description" data-astro-cid-eahyhkeo>A web calculator for BPM to ms/Hz, plus swing, groove, MIDI export, and a tiny synth to audition feel.</p> <footer class="post-card-footer" data-astro-cid-eahyhkeo> <div class="post-tags" data-astro-cid-eahyhkeo> <span class="tag" data-astro-cid-eahyhkeo>music</span><span class="tag" data-astro-cid-eahyhkeo>tools</span><span class="tag" data-astro-cid-eahyhkeo>web</span> </div> </footer> </a> </article> <article class="post-card" data-astro-cid-eahyhkeo> <a href="/preview-content-navigation-api/blog/better-ascii-animations-with-webgl" class="post-link" data-astro-cid-eahyhkeo> <header class="post-card-header" data-astro-cid-eahyhkeo> <time datetime="2026-01-21T00:00:00.000Z" class="post-date" data-astro-cid-eahyhkeo> 21 January 2026 </time> <h2 class="post-title" data-astro-cid-eahyhkeo>Better ASCII animations with WebGL</h2> </header> <p class="post-description" data-astro-cid-eahyhkeo>Canvas 2D got me a working ASCII background, but WebGL2 is what made it smooth at real viewport sizes.</p> <footer class="post-card-footer" data-astro-cid-eahyhkeo> <div class="post-tags" data-astro-cid-eahyhkeo> <span class="tag" data-astro-cid-eahyhkeo>astro</span><span class="tag" data-astro-cid-eahyhkeo>performance</span><span class="tag" data-astro-cid-eahyhkeo>ascii</span> </div> </footer> </a> </article> <article class="post-card" data-astro-cid-eahyhkeo> <a href="/preview-content-navigation-api/blog/building-this-site" class="post-link" data-astro-cid-eahyhkeo> <header class="post-card-header" data-astro-cid-eahyhkeo> <time datetime="2026-01-20T00:00:00.000Z" class="post-date" data-astro-cid-eahyhkeo> 20 January 2026 </time> <h2 class="post-title" data-astro-cid-eahyhkeo>Building a dev blog with ASCII art and AI</h2> </header> <p class="post-description" data-astro-cid-eahyhkeo>How I built this site using Astro, TypeScript, and some help from AI assistants. A story of ASCII art, explosions, and chasing aesthetic.</p> <footer class="post-card-footer" data-astro-cid-eahyhkeo> <div class="post-tags" data-astro-cid-eahyhkeo> <span class="tag" data-astro-cid-eahyhkeo>astro</span><span class="tag" data-astro-cid-eahyhkeo>typescript</span><span class="tag" data-astro-cid-eahyhkeo>ai</span> </div> </footer> </a> </article>  </div> </section> <a href="/preview-content-navigation-api/blog" class="back-link" data-astro-cid-gjtny2mx>← Back to all posts</a> </footer> </article> </main> </div>  <astro-island uid="ZFiqtI" prefix="r2" component-url="/preview-content-navigation-api/_astro/SettingsPanel.DdLWz_cv.js" component-export="default" renderer-url="/preview-content-navigation-api/_astro/client.D_Es0amM.js" props="{}" ssr client="load" opts="{&quot;name&quot;:&quot;SettingsPanel&quot;,&quot;value&quot;:true}" await-children><button class="settings-toggle" aria-label="Toggle settings" aria-expanded="false"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg></button><div class="settings-panel "><div class="settings-header"><h3>Settings</h3><button class="close-btn" aria-label="Close settings"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"></path></svg></button></div><div class="settings-content"><div class="setting-section"><label class="setting-label">Appearance</label><div class="segment-control"><button class="segment-btn ">Light</button><button class="segment-btn active">Dark</button><button class="segment-btn ">Auto</button></div></div><div class="setting-section"><label class="setting-label">Accent Colour</label><div class="color-pills"><button class="color-pill active" style="--pill-color:#10b981" title="Emerald" aria-label="Emerald"><span class="color-dot"></span></button><button class="color-pill " style="--pill-color:#3b82f6" title="Ocean" aria-label="Ocean"><span class="color-dot"></span></button><button class="color-pill " style="--pill-color:#8b5cf6" title="Violet" aria-label="Violet"><span class="color-dot"></span></button><button class="color-pill " style="--pill-color:#f59e0b" title="Amber" aria-label="Amber"><span class="color-dot"></span></button><button class="color-pill " style="--pill-color:#f43f5e" title="Rose" aria-label="Rose"><span class="color-dot"></span></button><button class="color-pill " style="--pill-color:#64748b" title="Slate" aria-label="Slate"><span class="color-dot"></span></button></div></div><div class="setting-section"><label class="setting-label">Background Effect</label><div class="effect-list"><button class="effect-item active"><span class="effect-name">Wave</span><span class="effect-desc">Gentle ripples</span></button><button class="effect-item "><span class="effect-name">Rain</span><span class="effect-desc">Falling characters</span></button><button class="effect-item "><span class="effect-name">Pulse</span><span class="effect-desc">Radiating circles</span></button><button class="effect-item "><span class="effect-name">Glitch</span><span class="effect-desc">Digital noise</span></button></div></div><div class="setting-section"><div class="slider-group"><label class="setting-label">Speed<span class="value-badge">1.0<!-- -->×</span></label><input type="range" min="0.25" max="3" step="0.25" class="slider" value="1"/></div></div><div class="setting-section"><div class="slider-group"><label class="setting-label">Intensity<span class="value-badge">60<!-- -->%</span></label><input type="range" min="0.1" max="1" step="0.1" class="slider" value="0.6"/></div></div><div class="setting-section"><label class="toggle-label"><span class="toggle-text">Auto-cycle effects</span><div class="toggle active"><div class="toggle-thumb"></div></div></label></div><div class="setting-section"><label class="toggle-label"><span class="toggle-text">Show FPS</span><div class="toggle "><div class="toggle-thumb"></div></div></label></div></div></div><style>
        .settings-toggle {
          position: fixed;
          bottom: 1.5rem;
          right: 1.5rem;
          width: 48px;
          height: 48px;
          border-radius: 50%;
          background: var(--bg-card);
          border: 1px solid var(--border-color);
          color: var(--text-secondary);
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: all 0.2s ease;
          z-index: 100;
          box-shadow: var(--shadow-md);
        }

        .settings-toggle:hover {
          background: var(--bg-elevated);
          color: var(--color-primary);
          border-color: var(--color-primary);
          transform: rotate(30deg);
        }

        .settings-panel {
          position: fixed;
          bottom: 5.5rem;
          right: 1.5rem;
          width: 320px;
          max-height: calc(100vh - 8rem);
          background: var(--bg-card);
          border: 1px solid var(--border-color);
          border-radius: var(--border-radius, 12px);
          box-shadow: var(--shadow-lg);
          z-index: 101;
          opacity: 0;
          visibility: hidden;
          transform: translateY(10px);
          transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
          overflow: hidden;
        }

        .settings-panel.open {
          opacity: 1;
          visibility: visible;
          transform: translateY(0);
        }

        .settings-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 1rem 1.25rem;
          border-bottom: 1px solid var(--border-color);
        }

        .settings-header h3 {
          margin: 0;
          font-size: 1rem;
          font-weight: 600;
          color: var(--text-primary);
        }

        .close-btn {
          background: none;
          border: none;
          color: var(--text-muted);
          cursor: pointer;
          padding: 4px;
          border-radius: 6px;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: all 0.15s;
        }

        .close-btn:hover {
          background: var(--bg-elevated);
          color: var(--text-primary);
        }

        .settings-content {
          padding: 1rem 1.25rem;
          overflow-y: auto;
          max-height: calc(100vh - 14rem);
          display: flex;
          flex-direction: column;
          gap: 1.25rem;
        }

        .setting-section {
          display: flex;
          flex-direction: column;
          gap: 0.5rem;
          opacity: 0;
          animation: slideInUp 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }

        .settings-panel:not(.open) .setting-section {
          animation: none;
          opacity: 0;
        }

        .setting-section:nth-child(1) {
          animation-delay: 0.05s;
        }

        .setting-section:nth-child(2) {
          animation-delay: 0.1s;
        }

        .setting-section:nth-child(3) {
          animation-delay: 0.15s;
        }

        .setting-section:nth-child(4) {
          animation-delay: 0.2s;
        }

        .setting-section:nth-child(5) {
          animation-delay: 0.25s;
        }

        .setting-section:nth-child(6) {
          animation-delay: 0.3s;
        }

        .setting-section:nth-child(7) {
          animation-delay: 0.35s;
        }

        @keyframes slideInUp {
          from {
            opacity: 0;
            transform: translateY(8px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        .setting-label {
          font-size: 0.75rem;
          font-weight: 500;
          color: var(--text-muted);
          text-transform: uppercase;
          letter-spacing: 0.03em;
          display: flex;
          justify-content: space-between;
          align-items: center;
        }

        .value-badge {
          font-family: var(--font-mono);
          font-size: 0.7rem;
          color: var(--color-primary);
          background: var(--ascii-tint);
          padding: 2px 6px;
          border-radius: 4px;
        }

        .segment-control {
          display: flex;
          background: var(--bg-primary);
          border-radius: 8px;
          padding: 3px;
          gap: 2px;
        }

        .segment-btn {
          flex: 1;
          padding: 0.5rem;
          background: transparent;
          border: none;
          border-radius: 6px;
          color: var(--text-secondary);
          cursor: pointer;
          font-size: 0.8rem;
          font-weight: 500;
          transition: all 0.15s;
        }

        .segment-btn:hover {
          color: var(--text-primary);
        }

        .segment-btn.active {
          background: var(--bg-card);
          color: var(--text-primary);
          box-shadow: var(--shadow-sm);
        }

        .color-pills {
          display: flex;
          gap: 0.5rem;
          flex-wrap: wrap;
        }

        .color-pill {
          width: 36px;
          height: 36px;
          border-radius: 50%;
          border: 2px solid transparent;
          background: var(--bg-primary);
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: all 0.15s;
        }

        .color-pill:hover {
          transform: scale(1.1);
        }

        .color-pill.active {
          border-color: var(--pill-color);
          background: var(--bg-elevated);
        }

        .color-dot {
          width: 20px;
          height: 20px;
          border-radius: 50%;
          background: var(--pill-color);
        }

        .effect-list {
          display: flex;
          flex-direction: column;
          gap: 0.375rem;
        }

        .effect-item {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 0.625rem 0.75rem;
          background: var(--bg-primary);
          border: 1px solid transparent;
          border-radius: 8px;
          cursor: pointer;
          transition: all 0.15s;
        }

        .effect-item:hover {
          background: var(--bg-elevated);
        }

        .effect-item.active {
          border-color: var(--color-primary);
          background: var(--ascii-tint);
        }

        .effect-name {
          font-size: 0.85rem;
          font-weight: 500;
          color: var(--text-primary);
        }

        .effect-item.active .effect-name {
          color: var(--color-primary);
        }

        .effect-desc {
          font-size: 0.75rem;
          color: var(--text-muted);
        }

        .slider-group {
          display: flex;
          flex-direction: column;
          gap: 0.5rem;
        }

        .slider {
          width: 100%;
          height: 4px;
          background: var(--bg-primary);
          border-radius: 2px;
          outline: none;
          -webkit-appearance: none;
          appearance: none;
        }

        .slider::-webkit-slider-thumb {
          -webkit-appearance: none;
          appearance: none;
          width: 16px;
          height: 16px;
          background: var(--color-primary);
          border-radius: 50%;
          cursor: pointer;
          transition: transform 0.15s;
        }

        .slider::-webkit-slider-thumb:hover {
          transform: scale(1.15);
        }

        .slider::-moz-range-thumb {
          width: 16px;
          height: 16px;
          background: var(--color-primary);
          border-radius: 50%;
          cursor: pointer;
          border: none;
        }

        .toggle-label {
          display: flex;
          justify-content: space-between;
          align-items: center;
          cursor: pointer;
        }

        .toggle-text {
          font-size: 0.85rem;
          color: var(--text-primary);
        }

        .toggle {
          width: 44px;
          height: 24px;
          background: var(--bg-primary);
          border-radius: 12px;
          padding: 2px;
          transition: background 0.2s;
          cursor: pointer;
        }

        .toggle.active {
          background: var(--color-primary);
        }

        .toggle-thumb {
          width: 20px;
          height: 20px;
          background: white;
          border-radius: 50%;
          transition: transform 0.2s;
          box-shadow: var(--shadow-sm);
        }

        .toggle.active .toggle-thumb {
          transform: translateX(20px);
        }

        .settings-backdrop {
          position: fixed;
          inset: 0;
          background: rgba(0, 0, 0, 0.4);
          z-index: 99;
          backdrop-filter: blur(2px);
        }

        @media (max-width: 480px) {
          .settings-panel {
            right: 0.75rem;
            left: 0.75rem;
            bottom: 5rem;
            width: auto;
          }

          .settings-toggle {
            bottom: 1rem;
            right: 1rem;
            width: 44px;
            height: 44px;
          }
        }
      </style><!--astro:end--></astro-island> <script type="module" src="/preview-content-navigation-api/_astro/BaseLayout.astro_astro_type_script_index_0_lang.B7kdvWMf.js"></script> </body> </html>  <script type="module">function i(o){const s=o.querySelectorAll(".node rect, .cluster rect, .label-container");for(const e of s)e.setAttribute("rx","10"),e.setAttribute("ry","10");const t=o.querySelector("svg");if(!t)return;let r=t.querySelector("defs");if(r||(r=document.createElementNS("http://www.w3.org/2000/svg","defs"),t.prepend(r)),!r.querySelector("#mermaid-node-shadow")){const e=document.createElementNS("http://www.w3.org/2000/svg","filter");e.setAttribute("id","mermaid-node-shadow"),e.setAttribute("x","-10%"),e.setAttribute("y","-10%"),e.setAttribute("width","130%"),e.setAttribute("height","140%"),e.innerHTML=`
        <feDropShadow dx="0" dy="2" stdDeviation="3" flood-color="rgba(0,0,0,0.25)" flood-opacity="0.4"/>
      `,r.appendChild(e)}const n=o.querySelectorAll(".node, .cluster");for(const e of n)e.style.filter="url(#mermaid-node-shadow)"}function d(){const o=document.querySelectorAll(".mermaid");if(o.length===0)return;const s=new MutationObserver(t=>{for(const r of t){const n=r.target,e=n.closest(".mermaid")??n;e.querySelector("svg")&&i(e)}});for(const t of o)t.querySelector("svg")&&i(t),s.observe(t,{childList:!0,subtree:!0})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",d,{once:!0}):d();document.addEventListener("astro:after-swap",d);</script> <script type="module">function a(){const e=document.querySelector("[data-post-navigation]");if(!e)return;const n=e.getAttribute("data-prev")||"",o=e.getAttribute("data-next")||"";if(!n&&!o)return;const d=t=>{if(t.defaultPrevented)return;const r=t.target;if(!(r instanceof HTMLElement))return;const s=r.tagName;r.isContentEditable||["INPUT","TEXTAREA","SELECT"].includes(s)||(t.key==="ArrowLeft"&&n&&(window.location.href=n),t.key==="ArrowRight"&&o&&(window.location.href=o))};document.addEventListener("keydown",d);const i=()=>{document.removeEventListener("keydown",d)};document.addEventListener("astro:before-swap",i,{once:!0})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",a,{once:!0}):a();document.addEventListener("astro:after-swap",a);</script>